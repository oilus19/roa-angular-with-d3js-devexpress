var resultsonairNotes=resultsonairNotes||{};!function($,e,n){"use strict";$(e).load(function(){resultsonairNotes.$container=$(".notes-env"),$.extend(resultsonairNotes,{isPresent:resultsonairNotes.$container.length>0,noTitleText:"Untitled",noDescriptionText:"(No content)",$currentNote:$(null),$currentNoteTitle:$(null),$currentNoteDescription:$(null),$currentNoteContent:$(null),addNote:function(){var e=$('<li><a href="#"><strong></strong><span></li></a></li>');e.append('<div class="content"></div>').append('<button class="note-close">&times;</button>'),e.find("strong").html(resultsonairNotes.noTitleText),e.find("span").html(resultsonairNotes.noDescriptionText),resultsonairNotes.$notesList.prepend(e),TweenMax.set(e,{autoAlpha:0});var n=new TimelineMax;n.append(TweenMax.to(e,.1,{css:{autoAlpha:1}})),n.append(TweenMax.to(e,.15,{css:{autoAlpha:.8}})),n.append(TweenMax.to(e,.15,{css:{autoAlpha:1}})),resultsonairNotes.$notesList.find("li").removeClass("current"),e.addClass("current"),resultsonairNotes.$writePadTxt.focus(),resultsonairNotes.checkCurrentNote()},checkCurrentNote:function(){var e=resultsonairNotes.$notesList.find("li.current").first();if(e.length)resultsonairNotes.$currentNote=e,resultsonairNotes.$currentNoteTitle=e.find("strong"),resultsonairNotes.$currentNoteDescription=e.find("span"),resultsonairNotes.$currentNoteContent=e.find(".content"),resultsonairNotes.$writePadTxt.val($.trim(resultsonairNotes.$currentNoteContent.html())).trigger("autosize.resize");else{var n=resultsonairNotes.$notesList.find("li:first:not(.no-notes)");n.length?(n.addClass("current"),resultsonairNotes.checkCurrentNote()):(resultsonairNotes.$writePadTxt.val(""),resultsonairNotes.$currentNote=$(null),resultsonairNotes.$currentNoteTitle=$(null),resultsonairNotes.$currentNoteDescription=$(null),resultsonairNotes.$currentNoteContent=$(null))}},updateCurrentNoteText:function(){var e=$.trim(resultsonairNotes.$writePadTxt.val());if(resultsonairNotes.$currentNote.length){console.log(resultsonairNotes.$currentNote[0]);var n="",t="";if(e.length)for(var o=e.split("\n"),s=1,r=0;r<o.length&&(o[r]&&(1==s?n=o[r]:2==s&&(t=o[r]),s++),!(s>2));r++);resultsonairNotes.$currentNoteTitle.text(n.length?n:resultsonairNotes.noTitleText),resultsonairNotes.$currentNoteDescription.text(t.length?t:resultsonairNotes.noDescriptionText),resultsonairNotes.$currentNoteContent.text(e)}else e.length&&resultsonairNotes.addNote()}}),resultsonairNotes.isPresent&&(resultsonairNotes.$notesList=resultsonairNotes.$container.find(".list-of-notes"),resultsonairNotes.$writePad=resultsonairNotes.$container.find(".write-pad"),resultsonairNotes.$writePadTxt=resultsonairNotes.$writePad.find("textarea"),resultsonairNotes.$addNote=resultsonairNotes.$container.find("#add-note"),resultsonairNotes.$addNote.on("click",function(e){resultsonairNotes.addNote()}),resultsonairNotes.$writePadTxt.on("keyup",function(e){resultsonairNotes.updateCurrentNoteText()}),resultsonairNotes.checkCurrentNote(),resultsonairNotes.$notesList.on("click","li a",function(e){e.preventDefault(),resultsonairNotes.$notesList.find("li").removeClass("current"),$(this).parent().addClass("current"),resultsonairNotes.checkCurrentNote()}),resultsonairNotes.$notesList.on("click","li .note-close",function(e){e.preventDefault();var n=$(this).parent(),t=new TimelineMax;t.append(TweenMax.to(n,.15,{css:{autoAlpha:0},onComplete:function(){n.remove(),resultsonairNotes.checkCurrentNote()}}))}))})}(jQuery,window);